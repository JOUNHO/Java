# IO 기반 입출력 및 네트워킹

자바에서 데이터는 스트림(Stream)을 통해 입출력되므로 스트림의 특징을 잘 이해해야 한다. 스트림은 단일 방향으로 연속적으로 흘러가는 것을 말하는데, 데이터는 출발지에서 나와 도착지로 들어간다는 개념이다.파일=>프로그램=>파일

## 입력 스트림과 출력 스트림
입력 스트림 : 프로그램이 데이터를 입력받을 때  
출력 스트림 : 프로그램이 데이터를 보낼 때

스트림 클래스는 크게 두 종류로 구분된다.  
바이트 기반 스트림: 그림,멀티미디어, 문자 등 모든 종류의 데이터를 받고 보낼 수 있다.(InputStream,OutputStream)  
문자 기반 스트림: 오로지 문자만 받고 보낼 수 있도록 특화되어 있다.(Reader,Writer)  


### InputStream  
InputStream은 바이트 기반 입력 스트림의 최상위 클래스로 추상 클래스이다. 모든 바이트 기반 입력 스트림은 이 클래스를 상속받아서 만들어진다. FileInputStream, BufferedInputStream, DataInputStream 클래스는 모두 InputStream 클래스를 상속하고 있다. 다음은 InpuStream 클래스의 주요 메소드이다.  
리턴 타입|메소드|설명
---|---|---|
int|read()|입력 스트림으로부터 1바이트를 읽고 읽은 바이트를 리턴한다.
int|read(byte[] b)| 입력 스트림으로부터 읽은 바이트들을 매개값으로 주어진 바이트 배열 b에 저장하고 실제로 읽은 바이트 수를 리턴한다.
int|read(byte[] b,int off,int len)| 입력 스트림으로부터 len개의 바이트만큼 읽고 매개값으로 주어진 바이트 배열 b[off]부터 len개까지 저장한다.
void|close()| 사용한 시스템 자원을 반납하고 입력 스트림을 닫는다.


### OutputStream
Outputstream은 바이트 기반 출력 스트림의 최상위 클래스로 추상 클래스이다. 모든 바이트 기반 출력 스트림 클래스는 이 클래스를 상속받아서 만들어진다. FileOutputStream, PrintStream, BufferedOutputStream, DataOutputStream 클래스는 모두 OutputStream클래스를 상속하고 있다.다음은 OutputStream 클래스의 주요 메소드이다.  
리턴 타입| 메소드| 설명
---|---|---|
void| write(int b)|출력 스트림으로 1바이트를 보낸다(b의 끝 1바이트)
void| write(byte[] b)|출력 스트림으로 주어진 바이트 배열 b의 모든 바이트를 보낸다.
void| write(byte]| b,int off,int len)| 출력 스트림으로 주어진 바이트 배열 b[off]부터 len개까지의 바이트를 보낸다.
void| flush()| 버퍼에 잔류하는 모든 바이트를 출력한다.
void| close()| 사용한 시스템 자원을 반납하고 출력 스트림을 닫는다.  

### Reader
Reader는 문자 기반 입력 스트림의 최상위 클래스로 추상 클래스이다. 모든 문자 기반 입력 스트림은 이 클래스를 상속받아서 만들어진다. FilerReader, BufferedReader, InputStreamReader 클래스는 모두 Reader 클래스를 상속하고 있다.다음은 Reader 클래스의 주요 메소드이다.  
리턴 타입|메소드|설명
---|---|---|
int|read()| 입력 스트림으로부터 한 개의 문자를 읽고 리턴한다.
int|read(char[] cbuf)|입력 스트림으로부터 읽은 문자들을 매객값으로 주어진 문자 배열 cbuf에 저장하고 실제로 읽은 문자 수를 리턴한다.
int| read(char[] cbuf,int off, int len)| 입력 스트림으로부터 len개의 문자를 읽고 매개값으로 주어진 문자 배열 cbuf[off]부터 len개까지 저장한다. 그리고 실제로 읽은 문자 수인 len개를 리턴한다.
void|close()|사용한 시스템 자원을 반납하고 입력 스트림을 닫는다.  

### Writer
Writer는 문자 기반 출력 스트림의 최상위 클래스로 추상 클래스이다. 모든 문자 기반 출력 스트림 클래스는 이 클래스를 상속받아서 만들어진다. FileWriter, BufferdWriter, PrintWriter, OutputStreamWriter클래스는 모두 Writer 클래스를 상속하고 있다.  


## 콘솔 입출력
콘솔은 시스템을 사용하기 위해 키보드로 입력을 받고 화면으로 출렷하는 소프트웨어를 말한다. 유닉스나 리눅스 운영체제는 터미널에 해당하고, window운영체제는 명령 프로프트에 해당한다. 자바는 콘솔로부터 데이터를 입력 받을때 Systme.in을 사용하고, 콘솔에 데이터를 출력할 때 System.out을 사용한다.

## 파일 입출력
### File 클래스
File클래스는 파일 크기, 파일 속성, 파일 이름 등의 정보를 얻어내는 기능과 파일 생성 및 삭제 기능을 제공하고 있다. 그리고 디렉토리를 생성하고 디렉토리에 존재하는 파일 리스트를 얻어내는 기능도 있다. 그러나 파일의 데이터를 읽고 쓰는 기능은 지원하지 않는다. 파일의 입출력은 스트림을 사용해야 한다.  

## 보조 스트림  
보조 스트림이란 다른 스트림과 연결되어 여러 가지 편리한 기능을 제공해주는 스트림을 말한다. 보조 스트림을 필터 스트림이라고도 하는데, 이는 보조 스트림의 일부가 FilterInputStream, FilterOutputStream의 하위 클래스이기 때문이다.  
보조 스트림은 자체적으로 입출력을 수행할 수 없기 때문에 입력 소스와 바로 연결되는 InputStream,FileInputStream,Reader,FileReader, 출력 소스와 바로 연결되는 OutputStream, FileOutputStream, Writer, FileWriter 등에 연결해서 입출력을 수행한다. 보조 스트림은 문자 변환, 입출력 성능 향상, 기본 데이터 타입 입출력, 객체 입출력 등의 기능을 제공한다.

## TCP네트워킹
TCP는 연결 지향적 프로토콜이다. 연결 지향 프로토콜이란 클라이언트와 서버가 연결된 상태에서 데이터를 주고받는 프로토콜을 말한다. 클라이언트가 연결 요청을 하고, 서버가 연결을 수락하면 통신 선로가 고정되고, 모든 데이터는 고정된 통신 선로를 통해서 순차적으로 전달된다. 그렇기 때문에 TCP는 데이터를 정확하고 안정적으로 전달한다. TCP의 단점은 데이터를 보내기 전에 반드시 연결이 형성되어야 하고(가장 시간이 많이 걸리는 작업), 고정된 통신 선로가 최단선이 아닐 경우 상대적으로 UDP보다 데이터 전송 속도가 느릴 수 있다.

### ServerSocket과 Socket의 용도
TCP 서버의 역할은 두가지로 볼 수 있다. 하나는 클라이언트가 연결 요청을 해오면 연결을 수락하는 것이고, 다른 하나는 연결된 클라이언트와 통신하는 것이다. 자바에서는 이 두 역할별로 별도의 클래스를 제공하고 있다. 클라이언트의 연결 요청을 기다리면서 연결 수락을 담당하는 것이 ServerSocket 클래스이고, 연결된 클라이언트와 통신을 담당하는 것이 Socket 클래스이다. 클라이언트가 요청을 해오면 ServerSocket은 연결을 수락하고 통신용 Socket을 만든다.
